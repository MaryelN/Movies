{% extends 'base.html.twig' %}

{% block title %}
	{{title}}
{% endblock %}

{% block body %}
	<div class="container col-xx-8 px-4 py-5">
		<div class="row flex-lg-row-reverse align-items-center g-5 py-5">
			<div class="col-10 col-sm-8 col-lg-6">
				<img src="{{ asset('build/images/logoMovies.png') }}" class="d-block mx-lg-auto img-fluid" alt="Bootstrap Themes" width="700" height="500" loading="lazy">
			</div>
			<div class="col-lg-6">
				<h1 class="display-5 fw-bold text-body-emphasis lh-1 mb-3">Responsive left-aligned hero with image</h1>
				<p class="lead">Quickly design and customize responsive mobile-first sites with Bootstrap, the world’s most popular front-end open source toolkit, featuring Sass variables and mixins, responsive grid system, extensive prebuilt components, and powerful JavaScript plugins.</p>
				<div class="d-grid gap-2 d-md-flex justify-content-md-start">
					<button type="button" class="btn btn-primary btn-lg px-4 me-md-2">Primary</button>
					<button type="button" class="btn btn-outline-secondary btn-lg px-4">Default</button>
				</div>
			</div>
		</div>
	</div>
	<div class="container">
		<h2 class="text-center my-5">Les derniers films ajoutés</h2>
		<div class="row row-cols-1 row-cols-sm-2 row-cols-md-4 g-3 display-flex justify-content-center">
			{% for movie in movies %}
				{% include 'partials/movie/_movie_cards.html.twig' with {movies: movies} %}
			{% endfor %}
		</div>
	</div>

	<script>
		document.addEventListener('DOMContentLoaded', function () {
const filterForm = document.querySelector('form'); // Adjust selector if needed

filterForm.addEventListener('submit', function (event) {
event.preventDefault(); // Prevent normal form submission

const formData = new FormData(filterForm);
const queryString = new URLSearchParams(formData).toString();

// Send AJAX request using fetch
fetch (`/movie/filter?${queryString}`, {
method: 'GET',
headers: {
'X-Requested-With': 'XMLHttpRequest' // Indicates this is an AJAX request
}
}).then(response => response.text()) // Expect HTML content.then(html => { // Replace the current movie cards with the new filtered content
document.querySelector('.row-cols-1').innerHTML = html;
}).catch(error => console.error('Error:', error));
});
});
	</script>

{% endblock %}
